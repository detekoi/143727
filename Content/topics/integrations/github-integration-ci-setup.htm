<?xml version="1.0" encoding="utf-8"?>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd">
    <head>
    </head>
    <body>
        <h1 class="title">Configuring your CI&#160;for the Eyes GitHub integration</h1>
        <div>Configuring your CI involves two steps</div>
        <ol class="numbered-list">
            <li>Setting the environment variable <span class="code-label">APPLITOOLS_API_KEY</span> to your API key. </li>
            <li>Configuring the build so that before it runs the visual UI test,
			 it sets the environment variable 
				<span class="code-label"> APPLITOOLS_BATCH_ID</span> to a value generated by the CI.</li>
        </ol>
        <div>For detailed configuration instructions, please select your platform:</div>
        <ul class="bulleted-list">
            <li><a class="link" href="#Travis">Travis</a>
            </li>
            <li><a class="link" href="#CircleCI">CircleCI</a>
            </li>
            <li><a class="link" href="#SemaphoreCI">Semaphore CI</a>
            </li>
            <li><a class="link" href="#AppVeyor">AppVeyor:</a>
            </li>
            <li><a class="link" href="#Jenkins">Jenkins</a>
            </li>
        </ul>
        <h2 class="title"><a name="Travis"></a>Travis CI</h2>
        <h3 class="title">Build configuration</h3>
        <div>In the file .travis.yml add the following line under the script section before running the visual UI test</div><pre><code class="hljs">
script:
- export APPLITOOLS_BATCH_ID=`echo ${TRAVIS_PULL_REQUEST_SHA:=$TRAVIS_COMMIT}`
</code></pre>
        <h3 class="title">Environment variable</h3>
        <div>On your project page</div>
        <ol class="numbered-list">
            <li>Click on “More options” and then select "Settings".</li>
            <li>In the “Environment Variables” section fill in the "Name" and "Value" fields.</li>
            <li>In the "Name" field put <span class="code-label">APPLITOOLS_API_KEY</span>.</li>
            <li>In the "Value" field put your API key. To obtain your key see <a class="link" href="../overview/obtain-api-key.htm">How to obtain your API&#160;key.</a></li>
            <li>Click "Add".</li>
        </ol>
        <h2 class="title"><a name="CircleCI"></a>CircleCI</h2>
        <h3 class="title">Build configuration</h3>
        <div>In the folder .circleci, in the file config.yml add the following run command under jobs/build/steps before running the visual UI test.</div><pre><code class="hljs">
jobs:
  build:
    steps:
       - run: "export APPLITOOLS_BATCH_ID=`echo $CIRCLE_SHA1`"
</code></pre>
        <h3 class="title">Environment variable</h3>
        <div>In the project dashboard </div>
        <ol class="numbered-list">
            <li>Press the “gear” icon.</li>
            <li>On the menu on the left, under “Build Settings”, click “Environment variable”.</li>
            <li>Click “Add Variable”.</li>
            <li>In the "Name" field put <span class="code-label">APPLITOOLS_API_KEY</span>.</li>
            <li>In the "Value" field put your API key. To obtain your key see <a class="link" href="../overview/obtain-api-key.htm">How to obtain your API&#160;key.</a></li>
            <li>Click "Add Variable".</li>
        </ol>
        <h2 class="title"><a name="SemaphoreCI"></a>Semaphore CI</h2>
        <h3 class="title">Build configuration</h3>
        <div>In the project page</div>
        <ol class="numbered-list">
            <li> Click "Project Settings" .</li>
            <li>In the setup panel click "Add New Command Line".</li>
            <li>Copy the following line to the field and press enter.</li>
        </ol><pre><code class="hljs">
export APPLITOOLS_BATCH_ID=`echo $REVISION`</code></pre>
        <h3 class="title">Environment variable</h3>
        <div>In the project page</div>
        <ol class="numbered-list">
            <li>Click on “Environment Variables”.</li>
            <li>Click “Add”.</li>
            <li>In the Name field put <span class="code-label">APPLITOOLS_API_KEY</span>.</li>
            <li>In the content field put your API key. To obtain your key see <a class="link" href="../overview/obtain-api-key.htm">How to obtain your API&#160;key.</a></li>
            <li>Tick the "Encrypt" content check box.</li>
            <li>Click "Create Variable".</li>
        </ol>
        <h2 class="title"><a name="AppVeyor"></a>AppVeyor</h2>
        <h3 class="title">Build configuration</h3>
        <div>In the file appveyor.yml add the following line in the "init:" section:</div><pre><code class="hljs">
init:
  - ps: $env:APPLITOOLS_BATCH_ID = if ($env:APPVEYOR_PULL_REQUEST_HEAD_COMMIT) { $env:APPVEYOR_PULL_REQUEST_HEAD_COMMIT } else { $env:APPVEYOR_REPO_COMMIT }
</code></pre>
        <h3 class="title">Environment variable</h3>
        <div>On your project page</div>
        <ol class="numbered-list">
            <li>Click “SETTINGS".</li>
            <li>On the left panel select “Environment”.</li>
            <li>In the Environment variables section click “Add variable”.</li>
            <li>In the Name field put <span class="code-label">APPLITOOLS_API_KEY</span>.</li>
            <li>In the value field put your API key. To obtain your key see <a class="link" href="../overview/obtain-api-key.htm">How to obtain your API&#160;key.</a></li>
            <li>Click "Save".</li>
        </ol>
        <h2><a name="Jenkins"></a>Jenkins</h2>
		<p>For full instructions on integration with Jenkins see <a class="link" href="https://applitools.com/blog/how-to-update-jenkins-build-status-in-github-pull-requests-step-by-step-tutorial">Updating Jenkins Build status</a></p>
        <p>Both configuration and setting the environment variable are done by navigating to the Jenkins project configuration, and going to the Execute shell window.</p>
        <h3 class="title">Build configuration</h3>
			<p>Set the <span class="code-label"> APPLITOOLS_BATCH_ID</span> as follows:</p>
			<pre><code class="hljs">export APPLITOOLS_BATCH_ID=`echo ${GIT_COMMIT}`</code></pre>
        <h3 class="title">Environment variable</h3>
			<p>Configure the API key as follows:</p>
			<pre><code class="hljs">export APPLITOOLS_API_KEY= "your api key"</code></pre>
    </body>
</html>